(function(n){n.fn.autoMail=function(t){var i=n.extend({},n.fn.autoMail.defaults,t);return this.each(function(){function o(t){n("#mailBox li").removeClass("cmail").eq(t).addClass("cmail")}var t=n(this),c=n.meta?n.extend({},i,t.data()):i,f,e,u;f=t.offset().top+t.height()+25;e=t.offset().left-1;(isFirefox=navigator.userAgent.indexOf("Firefox")>0)&&(f=t.offset().top+t.height()+25,e=t.offset().left-1);navigator.userAgent.indexOf("MSIE")>0&&(navigator.appVersion.match(/7./i)=="7."&&(f=t.offset().top+t.height()+25,e=t.offset().left-1),navigator.appVersion.match(/8./i)=="8."&&(f=t.offset().top+t.height()+25,e=t.offset().left-9));f=n("#content_nav").length<1?t.offset().top+40:t.offset().top+55;n(this).parent().parent("ul").attr("firstusermail")=="true"&&(f=t.position().top+t.height()+284);u=n('<div id="mailBox" style="top:'+f+"px;left:"+e+"px;width:"+t.width()+'px"><\/div>');n("body").append(u);var s=c.emails,h=function(t){var i,r;if(t.attr("autocomplete","off"),t.val()!=""){for(i="<p>请选择邮箱类型<\/p><ul>",r=0;r<s.length;r++)i+="<li>"+t.val()+"@"+s[r]+"<\/li>";i+="<\/ul>";u.html(i).show(0)}else u.hide(0);n("#mailBox li").hover(function(){n("#mailBox li").removeClass("cmail");n(this).addClass("cmail")},function(){n(this).removeClass("cmail")}).click(function(){t.val(n(this).html());u.hide(0);t.focus();t.attr("data-validation-engine","validate[required ,custom[email],ajax[ajaxEmailCall]]")})},r=-1;t.focus(function(){t.val().indexOf("@")==-1?h(t):u.hide(0)}).blur(function(){setTimeout(function(){u.hide(0);n("#email").attr("data-validation-engine","validate[required ,custom[email],ajax[ajaxEmailCall]]")},1e3)}).keyup(function(i){t.val().indexOf("@")==-1?i.keyCode==40?(r++,r>=n("#mailBox li").length&&(r=0),o(r)):i.keyCode==38?(r--,r<0&&(r=n("#mailBox li").length-1),o(r)):i.keyCode==13?r>=0&&(t.val(n("#mailBox li").eq(r).html()),u.hide(0),n("#email").focus(),n("#email").attr("data-validation-engine","validate[required ,custom[email],ajax[ajaxEmailCall]]")):(r=-1,h(t)):u.hide(0)}).keydown(function(n){if(n.keyCode==13)return!1})})};n.fn.autoMail.defaults={emails:[]}})(jQuery),function(n){n.fn.autoMailii=function(t){var i=n.extend({},n.fn.autoMailii.defaults,t);return this.each(function(){function o(t){n("#mailBox li").removeClass("cmail").eq(t).addClass("cmail")}var t=n(this),c=n.meta?n.extend({},i,t.data()):i,f,e,u;f=t.offset().top+t.height()+25;e=t.offset().left-1;(isFirefox=navigator.userAgent.indexOf("Firefox")>0)&&(f=t.offset().top+t.height()+25,e=t.offset().left-1);navigator.userAgent.indexOf("MSIE")>0&&(navigator.appVersion.match(/7./i)=="7."&&(f=t.offset().top+t.height()+25,e=t.offset().left-1),navigator.appVersion.match(/8./i)=="8."&&(f=t.offset().top+t.height()+25,e=t.offset().left-9));f=n("#content_nav").length<1?t.offset().top+40:t.offset().top+55;n(this).parent().parent("ul").attr("firstusermail")=="true"&&(f=t.position().top+t.height()+284);u=n('<div id="mailBox" style="top:'+f+"px;left:"+e+"px;width:"+t.width()+'px"><\/div>');n("body").append(u);var s=c.emails,h=function(t){var i,r;if(t.attr("autocomplete","off"),t.val()!=""){for(i="<p>请选择邮箱类型<\/p><ul>",r=0;r<s.length;r++)i+="<li>"+t.val()+"@"+s[r]+"<\/li>";i+="<\/ul>";u.html(i).show(0)}else u.hide(0);n("#mailBox li").hover(function(){n("#mailBox li").removeClass("cmail");n(this).addClass("cmail")},function(){n(this).removeClass("cmail")}).click(function(){t.val(n(this).html());u.hide(0);t.focus()})},r=-1;t.focus(function(){t.val().indexOf("@")==-1?h(t):u.hide(0)}).blur(function(){setTimeout(function(){u.hide(0)},1e3)}).keyup(function(i){t.val().indexOf("@")==-1?i.keyCode==40?(r++,r>=n("#mailBox li").length&&(r=0),o(r)):i.keyCode==38?(r--,r<0&&(r=n("#mailBox li").length-1),o(r)):i.keyCode==13?r>=0&&(t.val(n("#mailBox li").eq(r).html()),u.hide(0),n("#email").focus()):(r=-1,h(t)):u.hide(0)}).keydown(function(n){if(n.keyCode==13)return!1})})};n.fn.autoMailii.defaults={emails:[]}}(jQuery)